<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Самовар прогресса</title>

<style>
body{
  margin:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
  font-family:Arial, sans-serif;
  background:transparent;
}

/* Корпус самовара */
.samovar{
  position:relative;
  width:120px;
  height:260px;
  border:6px solid #444;
  border-radius:60px 60px 40px 40px;
  background:#f5f5f5;
  overflow:hidden;
  display:flex;
  align-items:flex-end;
}

/* Вода */
.water{
  width:100%;
  height:0%;
  background:linear-gradient(to top, #ff7b00, #ffb347);
  transition:height .6s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-weight:bold;
}

/* Основание */
.base{
  width:160px;
  height:30px;
  background:#444;
  border-radius:10px;
  margin-top:5px;
}

/* Подпись */
.label{
  margin-top:12px;
  font-size:14px;
  text-align:center;
}

/* Кнопки */
.controls{
  margin-top:12px;
  display:flex;
  gap:10px;
}

button{
  padding:6px 14px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}

.yes{background:#4CAF50;color:white;}
.no{background:#f44336;color:white;}
</style>
</head>

<body>

<div class="samovar">
  <div class="water" id="water">0%</div>
</div>
<div class="base"></div>

<div class="label" id="label">Нагрев...</div>

<div class="controls">
  <button class="yes" onclick="change(step)">Да</button>
  <button class="no" onclick="change(-step)">Нет</button>
</div>

<script>
const params = new URLSearchParams(window.location.search);

const max = parseInt(params.get("max")) || 100;
const step = parseInt(params.get("step")) || 10;
const color = params.get("color") || "#ff7b00";
const labelText = params.get("label") || "Самовар нагревается";

document.getElementById("label").textContent = labelText;
document.getElementById("water").style.background =
  `linear-gradient(to top, ${color}, #ffd27f)`;

let progress = 0;

function update(){
  const percent = Math.round((progress/max)*100);
  const water = document.getElementById("water");
  water.style.height = percent + "%";
  water.textContent = percent + "%";
  localStorage.setItem("samovarProgress", progress);

  if(percent === 100){
    document.getElementById("label").textContent = "Вода закипела! ☕";
  }
}

function change(val){
  progress = Math.min(max, Math.max(0, progress + val));
  update();
}

window.onload = () => {
  const saved = parseInt(localStorage.getItem("samovarProgress"));
  progress = isNaN(saved) ? 0 : saved;
  update();
};
</script>

</body>
</html>
